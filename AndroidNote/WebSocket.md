### 是什么？

一种基于tcp协议的轻量级网络传输协议

### 特点

1. 基于tcp协议，连接时需要一个握手的过程，对服务端比较友好
2. 默认端口采用80和443，握手阶段采用HTTP协议，不容易被防火墙屏蔽，能轻松通过各种HTTP代理服务器
3. 传输更加轻量，少了HTTP header，性能开销更小，传输效率更高
4. 沿用HTTP的URL，协议名称是ws、wss
5. 采用二进制帧的方式传递数据，其中包括传递数据的MESSAGE帧和其他三个常用的控制帧
   1. PING 主动报活的控制帧
   2. PONG 收到PING帧后回复
   3. CLOSE 主动关闭连接

### 为什么使用websocket

传统的http协议是半双工模式，数据的传输必须要经过一次请求应答，且同一时间数据只能在一个方向上传输，另一个最大的问题是这种方式完全是被动的，服务器只能等待客户端请求才能给客户端传输数据，否则无法主动发送

​	其余解决方案：

		1. 短轮询 客户端不停的向服务器请求（大多数请求都是无效的，且要求服务器能快速处理）
  		2. 长轮询 客户端发送一个请求后，服务器一直持有，在数据有变化时再返回（比较占用服务器资源，需要同时维护多个线程，且一台服务器能处理TCP请求是有限的）

### 如何鉴权

在header中添加token或者在url中携带参数

### 如何保活

定时发送PING帧，在okhttp中通过pingInterval方法设置发送间隔